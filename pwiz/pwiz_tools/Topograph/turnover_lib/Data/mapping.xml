<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
    namespace="pwiz.Topograph.Data" assembly="pwiz.Topograph.Lib">
  <class name="DbChromatogram">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>

    <many-to-one name="PeptideFileAnalysis" unique-key="PeptideFileAnalysisMz" not-null="true"/>
    <property name="Charge" unique-key="PeptideFileAnalysisMz" not-null="true" />
    <property name="MassIndex" unique-key="PeptideFileAnalysisMz" not-null="true"/>
    <property name="Mz" />
    <property name="IntensitiesBytes" length="1000000" type="BinaryBlob" />
    <property name="PeakMzsBytes" length="1000000" type="BinaryBlob" />
  </class>
  <class name="DbMsDataFile">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>
    <property name="ValidationStatus" />
    <property name="Note" />

    <many-to-one name="Workspace" not-null="true" unique-key="WorkspaceName"/>
    <property name="Name" not-null="true" unique-key="WorkspaceName"/>
    <property name="Label" />
    <property name="Path" />
    <property name="Cohort" />
    <property name="TimePoint" />
    <property name="TimesBytes" length="1000000" type="BinaryBlob" />
    <property name="MsLevels" length="1000000" type="BinaryBlob"/>
  </class>
  <class name="DbPeptide">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>
    <property name="ValidationStatus" />
    <property name="Note" />

    <many-to-one name="Workspace" not-null="true" unique-key="PeptideSequence"/>
    <bag name="SearchResults">
      <key column="Peptide" />
      <one-to-many class="DbPeptideSearchResult"/>
    </bag>
    <property name="SearchResultCount" />
    <property name="Sequence" not-null="true" unique-key="PeptideSequence"/>
    <property name="FullSequence" />
    <property name="Protein" />
    <property name="ProteinDescription" length="1000" />
    <property name="MaxTracerCount" />
  </class>
  <class name="DbPeptideSearchResult">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>
    <property name="ValidationStatus" />
    <property name="Note" />

    <many-to-one name="MsDataFile" unique-key="MsDataFilePeptide" not-null="true"/>
    <many-to-one name="Peptide" fetch="join" unique-key="MsDataFilePeptide" not-null="true" index="Peptide"/>
    <property name="MinCharge" />
    <property name="MaxCharge" />
    <property name="FirstDetectedScan" />
    <property name="LastDetectedScan" />
    <property name="FirstTracerCount" />
    <property name="LastTracerCount" />
  </class>
  <class name="DbEnrichment">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>
    <property name="TracerSymbol" />
    <property name="DeltaMass" />
    <property name="AtomCount" />
    <property name="AtomPercentEnrichment" />
    <property name="IsotopesEluteEarlier" />
    <property name="IsotopesEluteLater" />
    <property name="InitialEnrichment" />
    <property name="FinalEnrichment" />
  </class>
  <class name="DbWorkspace">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>
    
    <bag name="MsDataFiles">
      <key column="Workspace" />
      <one-to-many class="DbMsDataFile"/>
    </bag>
    <property name="MsDataFileCount" />
    
    <bag name="Peptides">
      <key column="Workspace"/>
      <one-to-many class="DbPeptide"/>
    </bag>
    <property name="PeptideCount" />
    
    <bag name="PeptideAnalyses">
      <key column="Workspace" />
      <one-to-many class="DbPeptideAnalysis"/>
    </bag>
    <property name="PeptideAnalysisCount" />
    
    <bag name="Modifications">
      <key column="Workspace"/>
      <one-to-many class="DbModification"/>
    </bag>
    <property name="ModificationCount" />
    
    <bag name="Settings">
      <key column="Workspace"/>
      <one-to-many class="DbSetting"/>
    </bag>
    <property name="SettingCount" />
    <many-to-one name="Enrichment"/>
  </class>
  <class name="DbModification">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>
    <many-to-one name="Workspace" />
    <property name="Symbol" />
    <property name="DeltaMass" />
  </class>
  <class name="DbSetting">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>
    <many-to-one name="Workspace" unique-key="WorkspaceName" not-null="true"/>
    <property name="Name" unique-key="WorkspaceName" not-null="true"/>
    <property name="Value" />
  </class>
  <class name="DbPeak">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>

    <many-to-one name="PeptideFileAnalysis" unique-key="PeptideFileAnalysisMz" not-null="true"/>
    <property name="Charge" unique-key="PeptideFileAnalysisMz" not-null="true" />
    <property name="MassIndex" unique-key="PeptideFileAnalysisMz" not-null="true"/>
    <property name="Mz" />
    <property name="TotalArea" />
    <property name="TotalError" />
    <property name="Background" />
    <property name="PeakStart" />
    <property name="PeakEnd" />
  </class>
  <class name="DbPeptideFileAnalysis">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>
    <property name="ValidationStatus" />
    <property name="Note" />

    <many-to-one name="PeptideAnalysis" unique-key="PeptideAnalysis" not-null="true"/>
    <many-to-one name="MsDataFile" unique-key="PeptideAnalysis" not-null="true"/>
    <bag name="Chromatograms" cascade="delete" inverse="true">
      <key column="PeptideFileAnalysis" />
      <one-to-many class="DbChromatogram" />
    </bag>
    <property name="ChromatogramCount" />
    <bag name="Peaks" cascade="delete" inverse="true">
      <key column="PeptideFileAnalysis" />
      <one-to-many class="DbPeak "/>
    </bag>
    <property name="PeakCount"/>
    <bag name="PeptideDistributions" cascade="delete" inverse="true">
      <key column="PeptideFileAnalysis"/>
      <one-to-many class="DbPeptideDistribution"/>
    </bag>
    <property name="PeptideDistributionCount"/>
    <property name="AutoFindPeak" />
    <property name="OverrideExcludedMzs" />
    <property name="ChromatogramStartTime" />
    <property name="ChromatogramEndTime" />
    <property name="FirstDetectedScan" />
    <property name="LastDetectedScan" />
    <property name="PeakStart" />
    <property name="PeakEnd" />
    <property name="TimesBytes" length="1000000" type="BinaryBlob"/>
    <property name="ScanIndexesBytes" length="1000000" type="BinaryBlob"/>
    <property name="ExcludedMzs" type="BinaryBlob" />
  </class>
  <class name="DbPeptideAnalysis">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>
    <property name="ValidationStatus" />
    <property name="Note" />

    <many-to-one name="Workspace" not-null="true" unique-key="PeptideAnalysis" />
    <many-to-one name="Peptide" not-null="true" unique-key="PeptideAnalysis" />
    <property name="MinCharge" />
    <property name="MaxCharge" />
    <property name="ExcludedMzs" type="BinaryBlob" />
    <property name="InitialEnrichment" />
    <property name="FinalEnrichment" />
    <property name="IntermediateEnrichmentLevels" />
    
    <bag name="FileAnalyses" cascade="delete" inverse="true">
      <key column="PeptideAnalysis" />
      <one-to-many class="DbPeptideFileAnalysis"/>
    </bag>
    <property name="FileAnalysisCount"/>
    <bag name="PeptideRates" cascade="delete" inverse="true">
      <key column="PeptideAnalysis"/>
      <one-to-many class="DbPeptideRate"/>
    </bag>
    <property name="PeptideRateCount"/>
  </class>
  <class name="DbPeptideDistribution">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>
    <many-to-one name="PeptideFileAnalysis" not-null="true" unique-key="PeptideDistribution" />
    <property name="PeptideQuantity" not-null="true" unique-key="PeptideDistribution" />
    <property name="Score" />
    <property name="AggregateValue" />
    <bag name="PeptideAmounts" cascade="delete" inverse="true">
      <key column="PeptideDistribution" />
      <one-to-many class="DbPeptideAmount"/>
    </bag>
    <property name="PeptideAmountCount"/>
  </class>
  <class name="DbPeptideAmount">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>
    <many-to-one name="PeptideDistribution" not-null="true" unique-key="PeptideAmount" />
    <property name="EnrichmentIndex" not-null="true" unique-key="PeptideAmount" />
    <property name="EnrichmentValue" />
    <property name="PercentAmount" />
  </class>
  <class name="DbPeptideRate">
    <id name="Id">
      <column name="Id" not-null="true"/>
      <generator class="native" />
    </id>
    <version name="Version" generated="never"/>
    <many-to-one name="PeptideAnalysis" not-null="true" unique-key="PeptideRate" />
    <property name="PeptideQuantity" not-null="true" unique-key="PeptideRate" />
    <property name="Cohort" not-null="true" unique-key="PeptideRate" />
    <property name="HalfLife" />
    <property name="InitialTurnover" />
    <property name="LimitValue" />
    <property name="Score" />
    <property name="IsComplete" />
  </class>
</hibernate-mapping>